<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <ul id="teamList">
        <li>BYU</li>
        <li>Gonzaga</li>
        <li>Loyola</li>
        <li>Pacific</li>
        <li>Pepperdine</li>
        <li>Portland</li>
        <li>Saint Marys</li>
        <li>San Diego</li>
        <li>San Francisco</li>
        <li>Santa Clara</li>
    </ul>
    <br><br>
    <input type="button" value="Play Game" onclick="playGame()">
    <br><br>
    <p>Season Results:</p>
    <p id="output"></p>
    
    <script>
        class Team {
            teamName;
            numWins;
            numLosses;
            winLossPct;
            games = [];

            getTeam() {
                return this.teamName;
            }
            setTeam(pTeamName) {
                this.teamName = pTeamName;
            }
            setWinsLosses(pWins, pLosses) {
                this.numWins = pWins;
                this.numLosses = pLosses;
                this.winLossPct = pWins / (pWins + pLosses);
            }
            getWins() {
                return this.numWins;
            }
            getLosses() {
                return this.numLosses;
            }
            calcWinLossPct() {
                this.winLossPct = this.numWins / (this.numWins + this.numLosses);
            }
        }

        class BasketballTeam extends Team {
            totalPointsFor = 0;
            totalPointsAgainst = 0;

            addPointsFor(pPointsFor) {
                this.totalPointsFor += pPointsFor;
            }
            addPointsAgainst(pPointsAgainst) {
                this.totalPointsAgainst += pPointsAgainst;
            }
            getAllPoints() {
                var sOutput = "Points for " + this.totalPointsFor + " and Points Against " + this.totalPointsAgainst;
                return sOutput;
            }
            
        }

        class Game {
            myScore;
            theirScore;
            winOrLoss; //string of W or L

            constructor(pMyScore, pTheirScore, pWinOrLoss) {
                this.myScore = pMyScore;
                this.theirScore = pTheirScore;
                this.winOrLoss = pWinOrLoss;
            }
        }

        //Testing Team Class
        var team1 = new Team();
        team1.setTeam("BYU Cougars");
        alert(team1.getTeam());

        team1.setWinsLosses(12, 2);
        alert(team1.getWins());
        alert(team1.getLosses());

        team1.calcWinLossPct();
        alert(team1.winLossPct);

        //Testing BasketballTeam Class
        var bballTeam1 = new BasketballTeam();
        bballTeam1.addPointsFor(25);
        bballTeam1.addPointsFor(25);
        bballTeam1.addPointsAgainst(20);
        bballTeam1.addPointsAgainst(20);
        alert(bballTeam1.getAllPoints());

        //Testing Game Class
        var game1 = new Game(75, 50, "W");
        alert(game1.myScore);
        alert(game1.theirScore);
        alert(game1.winOrLoss);
        
        
        var teamList = [];
        teamList = ["BYU", "Gonzaga", "Loyola", "Pacific" ,"Pepperdine", "Portland", "Saint Marys", "San Diego", "San Francisco", "Santa Clara"];

        // Set teams based on the list
        for (let i=0; i<teamList.length; i++) {
            window["team" + i] = new BasketballTeam();
            window["team" + i].setTeam(teamList[i]);
        }


for (let i=0; i<teamList.length; i++){
    for (let j=0; j<teamList.length; j++) {
        if (i!=j){
            var game = new Game();
            game.myScore = Math.floor(Math.random()*(100-0+1) + 0) + 5; // home team gets extra 5 points
            game.theirScore = Math.floor(Math.random()*(100-0+1) + 0);
            // Add Points For for both teams
            window["team" + i].addPointsFor(game.myScore);
            window["team" + j].addPointsFor(game.theirScore);

            // Add Points Against for both teams
            window["team" + i].addPointsAgainst(game.theirScore);
            window["team" + j].addPointsAgainst(game.myScore);

            while (game.myScore === game.theirScore) {
                console.log("There's a tie!")
                game.myScore = Math.floor(Math.random()*(15-0+1) + 0); 
                game.theirScore = Math.floor(Math.random()*(15-0+1) + 0);

                // Add Points For for both teams
                window["team" + i].addPointsFor(game.myScore);
                window["team" + j].addPointsFor(game.theirScore);

                // Add Points Against for both teams
                window["team" + i].addPointsAgainst(game.theirScore);
                window["team" + j].addPointsAgainst(game.myScore);
            }
            
            // Add array of Game objects to Team object
            window["team" + i].games.push(myGame)
            window["team" + j].games.push(theirGame)

            // Update win/loss to game object
            if (game.myScore > game.theirScore) {
                myGame.winOrLoss = "W";
                theirGame.winOrLoss = "L";
            }
            else {
                myGame.winOrLoss = "L";
                theirGame.winOrLoss = "W";
            }
            
            // Testing
            //console.log(i + " vs. " + j);
            //console.log("Points For " + window["team" + i].getTeam() + ": " + game.myScore);
            //console.log("Points Against " + window["team" + j].getTeam() + ": " + game.theirScore); 
        }   
    }
}  

        
    </script>
</body>
</html>
